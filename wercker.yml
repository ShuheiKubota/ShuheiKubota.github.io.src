box: debian
build:
  steps:
    - install-packages:
        packages: git
    - script:
        name: update theme
        code: |
            git submodule update --init --recursive
    - arjen/hugo-build:
        version: "HEAD"
        flags: --buildDrafts=false -v
  #after-steps:
  #  - slack-notifier:
  #    channel: $SLACK_CHANNEL
  #    url: $SLACK_URL
  #    username: wercker_bot

deploy:
  steps:
    - install-packages:
        packages: git ssh-client curl
    - lukevivier/gh-pages:
        token: $GIT_TOKEN
        repo: ShuheiKubota/ShuheiKubota.github.io
        basedir: public
  #after-steps:
  #  - script:
  #    name: delete cloudflare cache
  #    code: |
  #      sh ./scripts/delete_cache_all.sh ${CF_ZONE_ID} ${CF_EMAIL} ${CF_KEY}
  #  - slack-notifier:
  #    channel: $SLACK_CHANNEL
  #    url: $SLACK_URL
  #    username: wercker_bot
